<!doctype html>
<html lang="pl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kontroler ekran√≥w</title>
    <link rel="stylesheet" href="/src/styles/controller.css" />
  </head>
  <body>
    <main class="wrapper">
      <header class="header">
        <h1>Kontroler ekran√≥w - Ad Groups</h1>
        <p class="subtitle">
          Instancja: <strong id="instanceName"></strong> &nbsp;|&nbsp;
          <a href="/" style="font-size: 0.9em">‚Üê Powr√≥t do listy instancji</a>
        </p>
      </header>

      <!-- ========== GRUPY REKLAM ========== -->
      <section class="panel">
        <h2 class="panel-title">üì¶ Grupy reklam</h2>
        <div id="groupsList" class="groups-list">
          <!-- Dynamically populated by controller.ts -->
        </div>
        <button type="button" id="addGroupBtn" class="btn btn-secondary">+ Nowa grupa</button>
      </section>

      <!-- ========== PRZYPISANIE EKRAN√ìW ========== -->
      <section class="panel">
        <h2 class="panel-title">üñ•Ô∏è Przypisanie ekran√≥w do grup</h2>
        <div id="screenAssignmentsList" class="screen-assignments-list">
          <!-- Dynamically populated -->
        </div>
        <button type="button" id="addScreenBtn" class="btn btn-secondary">+ Dodaj ekran</button>
      </section>

      <!-- ========== KONTROLA ========== -->
      <section class="panel">
        <h2 class="panel-title">üé¨ Kontrola</h2>
        <div class="buttons">
          <button id="startAllBtn" type="button" class="btn btn-primary">‚ñ∂Ô∏è START wszystkie grupy</button>
          <button id="stopAllBtn" type="button" class="btn btn-danger">‚èπÔ∏è STOP wszystkie grupy</button>
        </div>
        <div class="hint" style="margin-top: 12px;">
          START/STOP dla poszczeg√≥lnych grup znajdujƒÖ siƒô przy ka≈ºdej grupie powy≈ºej.
        </div>
      </section>

      <!-- ========== LAUNCHER EKRAN√ìW ========== -->
      <section class="panel">
        <h2 class="panel-title">üöÄ Launcher ekran√≥w</h2>
        <div style="display: flex; gap: 8px; align-items: center;">
          <button type="button" style="padding: 6px 10px; min-width: 32px;" onclick="adjustScreenPos(-1)">‚àí</button>
          <input type="number" id="screenPos" value="0" min="0" max="99" 
                 style="width: 60px; text-align: center; padding: 6px; background: rgba(15, 23, 42, 0.8); border: 1px solid rgba(148, 163, 184, 0.3); border-radius: 6px; color: #e2e8f0; font-size: 14px;" />
          <button type="button" style="padding: 6px 10px; min-width: 32px;" onclick="adjustScreenPos(1)">+</button>
          <button type="button" style="padding: 8px 16px; background: rgba(56, 189, 248, 0.15); color: #7dd3fc; border: 1px solid rgba(56, 189, 248, 0.3); border-radius: 8px; font-weight: 600; cursor: pointer;" onclick="openScreenWindow()">
            üñ•Ô∏è Otw√≥rz ekran
          </button>
        </div>
        <p class="hint">
          Ustaw numer pozycji i kliknij "Otw√≥rz ekran" aby uruchomiƒá nowe okno
        </p>
      </section>

      <!-- ========== INSTRUKCJA ========== -->
      <section class="tips">
        <h2>Instrukcja</h2>
        <ul>
          <li><strong>Grupy reklam:</strong> Ka≈ºda grupa to zestaw produkt√≥w (carousel lub statyczny). Mo≈ºesz mieƒá wiele grup z r√≥≈ºnymi ustawieniami.</li>
          <li><strong>Przypisanie ekran√≥w:</strong> Ka≈ºdy ekran jest przypisany do jednej grupy. Ekrany z tej samej grupy (carousel) rotujƒÖ razem.</li>
          <li><strong>Carousel:</strong> Produkty rotujƒÖ co okre≈õlony interwa≈Ç (np. 10s). Ekrany sƒÖ zsynchronizowane.</li>
          <li><strong>Statyczny:</strong> Wy≈õwietla jeden produkt bez rotacji (np. menu, komunikat).</li>
          <li><strong>START/STOP:</strong> Mo≈ºesz kontrolowaƒá wszystkie grupy naraz lub ka≈ºdƒÖ osobno.</li>
        </ul>
      </section>
    </main>

    <!-- ========== MODAL EDYCJI GRUPY ========== -->
    <div id="groupModal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">Edytuj grupƒô</h2>
          <button type="button" class="modal-close" onclick="closeGroupModal()">√ó</button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="editGroupId" />

          <div class="field">
            <label for="groupName">Nazwa grupy</label>
            <input type="text" id="groupName" placeholder="np. Produkty, Menu, Promocje" />
          </div>

          <fieldset class="field">
            <legend>Typ grupy</legend>
            <label class="option">
              <input type="radio" name="groupType" value="carousel" checked />
              <span>Karuzela (rotacja produkt√≥w)</span>
            </label>
            <label class="option">
              <input type="radio" name="groupType" value="static" />
              <span>Statyczny (jeden produkt)</span>
            </label>
          </fieldset>

          <div class="field" id="intervalField">
            <label for="groupInterval">Interwa≈Ç (sekundy) - tylko dla karuzeli</label>
            <input type="number" id="groupInterval" min="1" step="1" value="10" />
          </div>

          <fieldset class="field">
            <legend>Tryb wy≈õwietlania</legend>
            <label class="option">
              <input type="radio" name="groupLayoutMode" value="card" checked />
              <span>Karta produktu (opis + grafika)</span>
            </label>
            <label class="option">
              <input type="radio" name="groupLayoutMode" value="image" />
              <span>Pe≈Çnoekranowa grafika</span>
            </label>
          </fieldset>

          <div class="field">
            <label class="checkbox-label">
              <input type="checkbox" id="groupProductionMode" />
              <span>Tryb produkcyjny (ukryj liczniki)</span>
            </label>
          </div>

          <div class="field">
            <label for="groupProducts">Produkty (jeden na liniƒô lub jeden blok HTML)</label>
            <textarea id="groupProducts" rows="10" spellcheck="false"></textarea>
            <div class="hint">
              Dla karuzeli: wklej wiele produkt√≥w (obrazki lub HTML).<br>
              Dla statycznego: wklej jeden produkt.
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeGroupModal()">Anuluj</button>
          <button type="button" class="btn btn-primary" onclick="saveGroup()">Zapisz</button>
        </div>
      </div>
    </div>

    <script type="module" src="/src/controller.ts"></script>
  </body>
</html>
